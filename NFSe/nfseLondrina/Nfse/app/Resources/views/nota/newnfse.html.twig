{% extends 'base.html.twig' %}

{% block body %}

    <form class="" method="post" action="" id="ajax_form">

        <div class="">

            <div class="row padding-top">
                <div class="col-md-3 col-md-offset-1">
				<span class="h3">Nota Fiscal Serviço
                    <small>
						<input type="hidden" name="numeroVenda">#{{ formValues.idNota }}
					</small>
				</span>
                </div>
                <div class="col-md-4">
                </div>
                <div class="col-md-3">
                    {#<a class="abuttonVoltar" href="{{ path('nota_index') }}">Voltar</a>#}
                </div>
            </div>
            <div class="row">
                <hr/>
            </div>

            <div class="row padding-top">
                <div class="row-divider dotted col-md-10 vertical-offset3 col-md-offset-1"></div>
            </div>

            {#Cliente#}
            <div class="row padding-top">

                <div class="col-md-offset-1 col-md-3">
                    <div class="float-left no-padding-left col-md-4">
                        <label>Cliente</label>
                    </div>
                    <div class="float-right text-right col-md-8">
                        <a href="#" data-toggle="modal" data-target="#modalClientes" class="customer-edit-link">
                            Perfil do cliente
                        </a>
                    </div>
                    <input type="text" id="NomeCliente" name="NomeCliente" class="NomeCliente form-control" required="required"
                           placeholder="Digite o nome do cliente" onchange="">
                </div>

                {#<div class="col-md-offset-1 col-md-3">#}
                    {#<div class="float-left no-padding-left col-md-4">#}
                        {#<label>Cliente</label>#}
                    {#</div>#}
                    {#<div class="input-group">#}
                        {#<input type="text" id="NomeCliente" name="NomeCliente" class="NomeCliente form-control" required="required"#}
                               {#placeholder="Digite o nome do cliente" onchange="">#}
                        {#<span class="input-group-btn">#}
                                            {#<button class="btn btn-secondary" type="button" data-toggle="modal" data-target="#modalServicos"><span class="glyphicon glyphicon-search"></span></button>#}
                        {#</span>#}
                    {#</div>#}
                {#</div>#}

                <div class="col-md-1">
                    <label>Número</label>
                    <input type="text" maxlength="9" value="" id="numeroNota" class="form-control"
                           name="numeroNota" class="text-right validate col-md-1" readonly>
                </div>

                <div class="col-md-2 fix-padding">
                    <label>Data da venda  &nbsp;</label><span class="glyphicon glyphicon-calendar"></span>
                    <div class="input-append date" id="datetimepicker1">
                        <input type="text" id="dataNota" name="dataNota" class="form-control" value="{{ formValues.data }}"
                                data-format="dd/MM/yyyy" required="required" placeholder="DD/MM/AAAA" disabled="true">

                    </div>
                </div>
            </div>

            <div class="row" style="display: none">
                <div class="col-md-offset-1 col-md-3">
                    <label>Vendedor Responsável</label>
                    <select class="" name="vendedor" id="vendedor">
                        <option value="" selected="selected" class="">&nbsp;</option>
                        <option value="0">Carregando...</option>
                    </select>
                </div>

                <div class="col-md-1">
                    <label>Cfop</label>
                    <select class="" name="vendedor" id="vendedor">
                        <option value="" selected="selected" class="">&nbsp;</option>
                        <option value="0">Carregando...</option>
                    </select>
                </div>
            </div>

            <div class="row padding-top">
                <div class="col-md-10 col-md-offset-1">
                    <label>Itens</label>
                </div>
            </div>

            <!--Tabela de Produtos-->
            <div class="row padding-top">
                <div class="col-md-offset-1 col-md-8">
                    <table class="tabelaprodutos table table-bordered" id="tabelaprodutos">
                        <thead>
                            <tr>
                                <th><div class="text-right">Produto/Serviço</div></th>
                                <th><div class="text-right">Detalhes do Item</div></th>
                                <th><div class="text-right">Quantidade</div></th>
                                <th><div class="text-right">Valor</div></th>
                                <th><div class="text-right">Desconto</div></th>
                                <th><div class="text-right">ISS</div></th>
                                <th><div class="text-right">%ISS</div></th>
                                <th><div class="text-right">Subtotal</div></th>
                                <th class=""></th>
                            </tr>
                        </thead>

                        <tbody>
                        <tr>
                            <td><input type="text" id="idServico0" name="idServico0" class="ServicoItem"></td>
                            <td><input type="text" id="DescricaoItem0" name="DescricaoItem0" class=""></td>
                            <td><input type="text" id="ItemQtd0" name="ItemQtd0" class="input-table text-right Totals"></td>
                            <td><input type="text" id="ItemPreco0" name="ItemPreco0" class="input-table text-right Totals"></td>
                            <td><input type="text" id="ItemDesconto0" name="ItemDescontol0" class="input-table text-right Totals"></td>
                            <td><input type="text" id="ItemISS0" name="ItemISS0" class="input-table text-right Totals"></td>
                            <td><input type="text" id="ItemPercIss0" name="ItemPercIss0" class="input-table text-right Totals"></td>
                            <td><input type="text" id="ItemTotal0" name="ItemTotal0" class="input-table text-right SubTotals"></td>
                            <td href="#" id="btnRemoveLinha" class="sale-delete-row">×</td>
                        </tr>
                        </tbody>

                    </table>
                </div>
                <div class="row">
                    <div class="col-md-12 col-md-offset-1 vertical-offset3">

                        <div class="col-md-3">
                            <a id="" href="#" onclick="inserirLinhaTabela()" class="flat-btn">
                                <span class="halflings plus"><i></i></span>
                                Adicionar mais uma linha
                            </a>
                        </div>

                        <div class="col-md-2 text-right">
                            <span></span>
                        </div>


                        <div class="col-md-2 text-right">
                            <span></span>
                        </div>

                    </div>
                </div>
            </div>

            {#Retenções#}
            <div class="row padding-top">

                <div class="col-md-offset-1 col-md-10">
                    <div class="row vertical-offset3">
                        <div class="col-md-1" style="text-decoration: underline">Retenções:</div>
                        <div class="col-md-1">ISS:</div>
                        <div class="col-md-1"><input type="text" class="form-control" id="iss" name="iss" value="0.00"></div>
                        <div class="col-md-1">CSL:</div>
                        <div class="col-md-1"><input type="text" class="form-control" id="csl" name="csl" value="0.00"></div>
                        <div class="col-md-1">PIS:</div>
                        <div class="col-md-1"><input type="text" class="form-control" id="pis" name="pis" value="0.00"></div>
                        <div class="col-md-1">IRRF:</div>
                        <div class="col-md-1"><input type="text" class="form-control" id="irrf" name="irrf" value="0.00"></div>
                    </div>
                </div>


                <div class="col-md-offset-1 col-md-10 padding-top">
                    <div class="row vertical-offset3">
                        <div class="col-md-1"></div>
                        <div class="col-md-1">COFINS:</div>
                        <div class="col-md-1"><input type="text" class="form-control" id="cofins" name="cofins" value="0.00"></div>
                        <div class="col-md-1">INSS:</div>
                        <div class="col-md-1"><input type="text" class="form-control" id="inss" name="inss" value="0.00"></div>
                        <div class="col-md-1">Base Calc.:</div>
                        <div class="col-md-1"><input type="text" class="form-control" id="base_calculo" name="base_calculo" value="0.00"></div>
                        <div class="col-md-1">Valor Dedução:</div>
                        <div class="col-md-1"><input type="text" class="form-control" id="valor_deducao" name="valor_deducao" value="0.00"></div>
                    </div>
                </div>

                {#Total Liquido#}
                <div class="col-md-offset-1 col-md-10 padding-top">
                    <div class="row">
                        <div class="col-md-2 liquid-total">
                            <label style="font-size: 18px">Total líquido:</label>
                        </div>
                        <div class="col-md-2 text-right">
                                <span class="liquid-total" id="valorTotalLiquido">
                                    <input class="form-control text-right" type="text" id="valorTotLiq" name="valorTotLiq" value="">
                                </span>
                        </div>

                        {#FormaPagamento#}
                        <div class="col-md-2">
                            <span>Forma de Pagamento:</span>
                        </div>
                        <div class="col-md-3">
                            <select id="formaPagamento" name="formaPagamento" class="form-control">
                                <option value="" selected="selected" class="">&nbsp;</option>
                                <option value="0">Dinheiro</option>
                                <option value="1">Cartão</option>
                                <option value="2">Cheque</option>
                                <option value="3">Boleto</option>
                                <option value="4">Outros</option>
                            </select>
                        </div>

                    </div>
                </div>

            </div>

            {#Observações#}
            <div class="row padding-top">
                <div class="col-md-10">
                    <div class="col-md-5 col-md-offset-1">
                        <label>Observações</label>
                    </div>
                    <div class="col-md-10 col-md-offset-1">
                        <textarea class="form-control" name="txtAreaObs" rows="5" id="comment"></textarea>
                    </div>

                </div>
            </div>


            {#Botão Salvar#}
            <div class="row padding-top padding-bottom">
                <div class="col-md-10">
                    <div class="col-md-1 col-md-offset-1 padding-bottom">
                        <input href="#" type="submit" class="btn-success" style="height: 40px; width: 110px; border-radius: 5px;" value="Salvar/Enviar" id="btnSave" name="Salvar">
                    </div>
                    <div class="col-md-1 padding-bottom" style="padding-left: 40px">
                        <a class="abuttonVoltar" style="height: 40px; width: 110px; padding-top: 10px" href="{{ path('nota_index') }}">Voltar</a>
                    </div>
                </div>
            </div>

            <div class="">
                <div class="row">
                    <div class="row-divider dotted col-md-10 vertical-offset3 col-md-offset-1"></div>
                </div>
            </div>
        </div>

        <input type="hidden" id="idCliente" class="idCliente" name="idCliente" value=""/>

    </form>




    <!-- Modal Clientes -->
    <div class="modal fade" id="modalClientes" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Lista de Clientes</h4>
                </div>

                <div class="modal-body" id="body_pesquisa">
                    <div class="padding-bottom">
                        <input type="text" class="search form-control" placeholder="Procurar">
                    </div>
                    <div class="tabela_clientes">
                        <table class="table table-bordered table-hover results" id="table_search">
                            <thead>
                            <tr>
                                <th>Código</th>
                                <th>Nome</th>
                                <th>CPF/CNPJ</th>
                                <th>#</th>
                            </tr>
                            </thead>
                            <tbody>
                                <tr>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="modal-body" id="body_cadastra_cliente" hidden>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-5">
                                <div class="">
                                    <label>CPF/CNPJ</label>
                                </div>
                                <div>
                                    <input type="text" id="cliente_cpfcnpj" name="cliente_cpfcnpj" class="form-control" placeholder="Sem pontos e traços." >
                                </div>
                            </div>

                            <div class="col-md-7">
                                <div class="">
                                    <label>Nome Cliente</label>
                                </div>
                                <div>
                                    <input type="text" id="cliente_nome" name="cliente_nome" class="form-control" placeholder="Digite o nome">
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-6">
                                <div class="">
                                    <label>Email</label>
                                </div>
                                <div>
                                    <input type="email" id="cliente_email" name="cliente_email" class="form-control" placeholder="exemplo@hotmail.com" >
                                </div>
                            </div>


                            <div class="col-md-4">
                                <div class="">
                                    <label>Cep</label>
                                </div>
                                <div>
                                    <input type="text" id="cliente_cep" name="cliente_cep" class="form-control" placeholder="00000111" >
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="">
                                    <label>UF</label>
                                </div>
                                <div>
                                    <input type="text" id="cliente_uf" name="cliente_uf" class="form-control" placeholder="UF" >
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">

                            <div class="col-md-6">
                                <div class="">
                                    <label>Endereço</label>
                                </div>
                                <div>
                                    <input type="text" id="cliente_endereco" name="cliente_endereco" class="form-control" placeholder="Rua, Avenida, etc..." >
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="">
                                    <label>Número</label>
                                </div>
                                <div>
                                    <input type="text" id="cliente_numero" name="cliente_numero" class="form-control" placeholder="N°" >
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="">
                                    <label>Cidade</label>
                                </div>
                                <div>
                                    <input type="text" id="cliente_cidade" name="cliente_cidade" class="form-control" placeholder="Ex: Londrina" >
                                    <input type="hidden" id="cliente_codCidade" name="cliente_codCidade" class="form-control" placeholder="" >
                                </div>
                            </div>

                        </div>
                    </div>


                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-6">
                                <div class="">
                                    <label>Bairro</label>
                                </div>
                                <div>
                                    <input type="text" id="cliente_bairro" name="cliente_bairro" class="form-control" placeholder="Bairro, Jardim, etc.." >
                                </div>
                            </div>


                        </div>
                    </div>

                </div>

                <div class="modal-footer">
                    <button type="button" class="NovoCliente btn btn-success" id="BtnNovoCliente">Novo Cliente</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Sair</button>
                    <button type="button" class="btn btn-primary" id="SelecionarCliente">Selecionar</button>
                </div>

            </div>
        </div>
    </div>


{% endblock %}

{% block javascripts %}

    {#<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>#}
    {#<script src="https://code.jquery.com/jquery-1.12.4.js"></script>#}
    <script src="{{ asset('assets/js/jquery.mask.js') }}"></script>
    {#<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>#}
    <script src="{{ asset('assets/js/jquery-ui.js') }}"></script>
    <script src="{{ asset('assets/js/sibrax_nota.js') }}"></script>

    <style>
        .results tr[visible='false'],
        .no-result{
            display:none;
        }

        .results tr[visible='true']{
            display:table-row;
        }
        .tabela_clientes{
            height: 380px !important;
            overflow: scroll;
        }

        .tabela_clientes tr {
            cursor: pointer;
        }

        .table-striped tbody tr:nth-child(odd) td {
            background-color: green;
        }

        .table-striped tbody tr.highlight td {
            background-color: red;
        }

    </style>
{% endblock %}