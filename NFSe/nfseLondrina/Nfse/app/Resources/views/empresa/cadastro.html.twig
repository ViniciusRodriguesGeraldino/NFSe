{% extends 'base.html.twig' %}

{% block body %}

    <div class="container min_height">

        <div class="row">
            <div class="col-md-10" style="min-width: 100px">
                <h1 class="pagination-centered">Completar registro...</h1>
            </div>
        </div>

        <br/>

        <div class="row">
            <ul class="progressbar">
                <li id="progressbar1" class="active">endereço</li>
                <li id="progressbar2">login</li>
                <li id="progressbar3">cliente</li>
                <li id="progressbar4">nota</li>
            </ul>
        </div>

        {#<div id="cadastro_menu" class="container padding-top center" style="font-size: 18px; padding-bottom: 5px">Endereço</div>#}
        <br/>

        <div style="max-width: 84%">
        {#Endereço#}
        <div id="cadastro_endereco" class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="row padding-top">

                        <div class="col-md-12">
                            <div class="">
                                <p>&bull; Por favor preencha o endereço de sua empresa.</p>
                                <br/>
                            </div>
                        </div>

                        <div class="col-md-2">
                            <div class="">
                                <label>Cep</label>
                            </div>
                            <div>
                                <input type="text" value="{{ empresa.cep }}" id="empresa_cep" name="empresa_cep" class="form-control"  placeholder="Digite o seu cep">
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="">
                                <label>Endereço</label>
                            </div>
                            <div>
                                <input type="text" value="{{ empresa.endereco }}" id="empresa_endereco" name="empresa_endereco" class="form-control" placeholder="" >
                            </div>
                        </div>

                        <div class="col-md-1">
                            <div class="">
                                <label>Número</label>
                            </div>
                            <div>
                                <input type="text" value="{{ empresa.numero }}" id="empresa_numero" name="empresa_numero" class="form-control" placeholder="" >
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="">
                                <label>Bairro</label>
                            </div>
                            <div>
                                <input type="text" value="{{ empresa.bairro }}" id="empresa_bairro" name="empresa_bairro" class="form-control" placeholder="" >
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="">
                                <label>Complemento</label>
                            </div>
                            <div>
                                <input type="text" value="{{ empresa.complemento }}" id="empresa_complemento" name="empresa_complemento" class="form-control" placeholder="" >
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="row padding-top">

                        <div class="col-md-2">
                            <div class="">
                                <label>Cidade</label>
                            </div>
                            <div>
                                <input type="text" value="{{ empresa.cidade }}" id="empresa_cidade" name="empresa_cidade" class="form-control" placeholder="" >
                                <input type="hidden" value="{{ empresa.codCid }}" id="empresa_cod_cidade" name="empresa_cod_cidade" class="form-control" placeholder="" >
                            </div>
                        </div>

                        <div class="col-md-1">
                            <div class="">
                                <label>UF</label>
                            </div>
                            <div>
                                <input type="text" value="{{ empresa.uf }}" id="empresa_uf" name="empresa_uf" class="form-control" placeholder="" >
                            </div>
                        </div>

                        <div class="col-md-6">
                        </div>

                        <div class="col-md-3" style="padding-top: 5px">
                            <div><label></label></div>
                            <div>
                                <input id="continuar_passo2" type="button" class="btn btn-success" value="Continuar >>"/>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        {#Nota Serviço#}
        <div id="cadastro_nota" class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="row padding-top">

                        <div class="col-md-12">
                            <div class="">
                                <p>&bull; Cadastro de Login de sua prefeitura.</p>
                                <p>&bull; Para Emissão de <strong>Nota Fiscal de Serviços</strong>, é necessário que estes dados estejam preenchidos pois serão utilizados para a emissão da nota.</p>
                                <p>&bull; Tipo Emissão: Homologação: Usado para emitir notas em testes, não possui valor fiscal e pode emitir quantas notas forem necessárias.</p>
                            </div>
                        </div>
                    </div>


                    <div class="row padding-top">

                        <div class="col-md-2">
                            <div class="">
                                <label>CMC</label>
                            </div>
                            <div>
                                <input type="text" value="{{ empresa.cmc }}" id="empresa_cmc" name="empresa_cmc" class="form-control"  placeholder="" >
                            </div>
                        </div>

                        <div class="col-md-2">
                            <div class="">
                                <label>CPF</label>
                            </div>
                            <div>
                                <input type="text" value="{{ empresa.cpfPrefeitura }}" id="empresa_cpf_prefeitura" name="empresa_cpf_prefeitura" class="form-control"  placeholder="" >
                            </div>
                        </div>


                        <div class="col-md-2">
                            <div class="">
                                <label>Senha</label>
                            </div>
                            <div>
                                <input type="password" value="{{ empresa.senhaPrefeitura }}" id="empresa_senha_prefeitura" name="empresa_senha_prefeitura" class="form-control"  placeholder="" >
                            </div>
                        </div>


                        <div class="col-md-3">
                            <div class="">
                                <label>Tipo Emissão</label>
                            </div>
                            <div>
                                <select class="form-control" id="empresa_tipo_emissao" name="empresa_tipo_emissao">
                                    <option {% if empresa.producao == 'N' %}selected{% endif %} value="N">Homologação (Testes)</option>
                                    <option {% if empresa.producao == 'S' %}selected{% endif %} value="S">Produção (Emissão Normal)</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-3" style="padding-top: 5px">
                            <div><label></label></div>
                            <div>
                                <input id="continuar_passo3" type="button" class="btn btn-success" value="Continuar >>"/>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        {#Cliente#}
        <div id="cadastro_cliente" class="container">

            {#linha 1#}
            <div class="row">
                <div class="col-md-12">
                    <div class="row padding-top">

                        <div class="col-md-12">
                            <div class="">
                                <p>&bull; Cadastrar um cliente para poder emitir nota (Não Obrigatório caso já possua algum cliente cadastrado).</p>
                                <br/>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="">
                                <label>Nome Cliente</label>
                            </div>
                            <div>
                                <input type="text" id="cliente_nome" name="cliente_nome" class="form-control" placeholder="Digite o nome">
                            </div>
                        </div>

                        <div class="col-md-2">
                            <div class="">
                                <label>Cep</label>
                            </div>
                            <div>
                                <input type="text" id="cliente_cep" name="cliente_cep" class="form-control" placeholder="00000111" >
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="">
                                <label>Endereço</label>
                            </div>
                            <div>
                                <input type="text" id="cliente_endereco" name="cliente_endereco" class="form-control" placeholder="" >
                            </div>
                        </div>

                        <div class="col-md-1">
                            <div class="">
                                <label>Número</label>
                            </div>
                            <div>
                                <input type="text" id="cliente_numero" name="cliente_numero" class="form-control" placeholder="" >
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="">
                                <label>Bairro</label>
                            </div>
                            <div>
                                <input type="text" id="cliente_bairro" name="cliente_bairro" class="form-control" placeholder="" >
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            {#linha 2#}
            <div class="row">
                <div class="col-md-12">
                    <div class="row padding-top">


                        <div class="col-md-3">
                            <div class="">
                                <label>Cidade</label>
                            </div>
                            <div>
                                <input type="text" id="cliente_cidade" name="cliente_cidade" class="form-control" placeholder="" >
                                <input type="hidden" id="cliente_codCidade" name="cliente_codCidade" class="form-control" placeholder="" >
                            </div>
                        </div>


                        <div class="col-md-1">
                            <div class="">
                                <label>UF</label>
                            </div>
                            <div>
                                <input type="text" id="cliente_uf" name="cliente_uf" class="form-control" placeholder="" >
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {#linha 3#}
            <div class="row">
                <div class="col-md-12">
                    <div class="row padding-top">


                        <div class="col-md-3">
                            <div class="">
                                <label>CPF/CNPJ</label>
                            </div>
                            <div>
                                <input type="text" id="cliente_cpfcnpj" name="cliente_cpfcnpj" class="form-control" placeholder="" >
                            </div>
                        </div>


                        <div class="col-md-3">
                            <div class="">
                                <label>Email</label>
                            </div>
                            <div>
                                <input type="email" id="cliente_email" name="cliente_email" class="form-control" placeholder="" >
                            </div>
                        </div>

                        {#<div class="col-md-3">#}
                        {#</div>#}

                        <div class="col-md-3" style="padding-top: 5px">
                        <div><label></label></div>
                        <div>
                        <input id="continuar_passo4_sem_cadastro" type="button" class="btn btn-primary" value="Cadastrarei mais tarde"/>
                        </div>
                        </div>

                        <div class="col-md-3" style="padding-top: 5px">
                        <div><label></label></div>
                        <div>
                        <input id="continuar_passo4" type="button" class="btn btn-success" value="Continuar >>"/>
                        </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>


        </div>
    </div>


{% endblock %}

{% block javascripts %}
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
    <script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js'></script>
    <script>
        $(document).ready(function(){
            $('#check_switch').click(function(){

                if(document.getElementById('check_switch').checked) {
                    document.getElementById('EmpresaSimples').innerHTML = 'Sim';
                } else {
                    document.getElementById('EmpresaSimples').innerHTML = 'Não';
                }
            });
        });


        jQuery(document).ready(function () {
            //Salvar
            jQuery('#form_empresa_edit').submit(function () {

                var dados = jQuery(this).serializeArray();
                var result = { };

                $.each(dados, function(i, field){
                    result[field.name] = field.value;
                });

//                console.log(dados);
//                console.log(result);
//                return false;

                jQuery.ajax({
                    type: "POST",
                    url: "EditarEmpresa",
                    data: {dados: result},
                    success: function (data) {
                         if (data.success == false) {
                            alert('Erro ao salvar cadastro. Erros: ' + data.msg);
                        }else{
                            alert('Cadastro Salvo.')
                             window.location.href = '../';
                         }
                    }
                });

                return false;
            });

            $('#continuar_passo2').click(function (e) {
                e.stopPropagation();
                $('#cadastro_endereco').hide('slide', {direction: 'left'}, 1400);
                $('#cadastro_nota').stop().show('slide', {direction: 'right'}, 1400);
                document.getElementById('progressbar2').setAttribute('class', 'active');
            });


            $('#continuar_passo3').click(function (e) {
                e.stopPropagation();
                $('#cadastro_nota').hide('slide', {direction: 'left'}, 1400);
                $('#cadastro_cliente').stop().show('slide', {direction: 'right'}, 1400);
                document.getElementById('progressbar3').setAttribute('class', 'active');
            });

        });

    </script>
    <style>
        body {
            /*font-family: 'Alegreya Sans', sans-serif;*/
            margin: 0;
            padding: 0;
        }

        #cadastro_nota, #cadastro_cliente {
            display: none;
            border: 1px solid #ddd;
            padding-bottom: 1%;
            /*max-width: 84%;*/
            /*float: right;*/
            z-index:1;
            position: absolute;
        }

        #cadastro_endereco {
            border: 1px solid #ddd;
            padding-bottom: 1%;
            /*max-width: 84%;*/
            /*float: right;*/
            z-index:1;
            position: absolute;
        }

        .progressbar {
            margin: 0;
            padding: 0;
            counter-reset: step;
        }
        .progressbar li {
            list-style-type: none;
            width: 25%;
            float: left;
            font-size: 12px;
            position: relative;
            text-align: center;
            text-transform: uppercase;
            color: #7d7d7d;
        }
        .progressbar li:before {
            width: 30px;
            height: 30px;
            content: counter(step);
            counter-increment: step;
            line-height: 30px;
            border: 2px solid #7d7d7d;
            display: block;
            text-align: center;
            margin: 0 auto 10px auto;
            border-radius: 50%;
            background-color: white;
        }
        .progressbar li:after {
            width: 100%;
            height: 2px;
            content: '';
            position: absolute;
            background-color: #7d7d7d;
            top: 15px;
            left: -50%;
            z-index: -1;
        }
        .progressbar li:first-child:after {
            content: none;
        }
        .progressbar li.active {
            color: green;
        }
        .progressbar li.active:before {
            border-color: #55b776;
        }
        .progressbar li.active + li:after {
            background-color: #55b776;
        }
    </style>

    <link href='https://fonts.googleapis.com/css?family=Alegreya+Sans' rel='stylesheet' type='text/css'>
{% endblock %}
